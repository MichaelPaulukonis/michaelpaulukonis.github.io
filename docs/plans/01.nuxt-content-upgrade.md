# Nuxt 3 + Nuxt Content v3 Migration Notes (Static GitHub Pages Site)

This document describes how to migrate a Nuxt 3 personal static site from Nuxt Content v2 with `nuxt-content-assets` to Nuxt Content v3 without that dependency. The goal is to keep Markdown content simple while using Nuxt 3’s native asset handling.

## Current setup

- Static personal site, deployed via `gh-pages` on GitHub Pages.
- Using Nuxt 3 and Nuxt Content v2, with `nuxt-content-assets` to manage images and other assets referenced from markdown.
- Planned dependency set (note the upgrade to Content v3):

```
"devDependencies": {
  "@nuxt/content": "^3.0.0",
  "@nuxt/fonts": "^0.11.0",
  "@nuxtjs/tailwindcss": "^6.13.2",
  "gh-pages": "^6.3.0",
  "nuxt": "^3.19.0",
  "rehype-external-links": "^3.0.0",
  "sass": "^1.85.1"
},
"dependencies": {
  "@vue/language-plugin-pug": "^2.2.4",
  "@vueuse/core": "^9.13.0",
  "nuxt-content-assets": "^1.4.4",
  "pug": "^3.0.3"
}
```

The key question: can `nuxt-content-assets` be removed, and how should content assets be handled with Content v3?

## What `nuxt-content-assets` provided

`nuxt-content-assets` existed to smooth over an older limitation in Nuxt Content:

- Allowed co-locating assets with content files, e.g.:

  - `content/blog/post-a.md`
  - `content/blog/post-a-image.jpg`

- Enabled using relative paths in markdown, like:

  ```
  
  ```

- On build, the module would:
  - Scan content sources for non-markdown assets.
  - Copy those assets into a public assets folder.
  - Maintain stable URLs for use in the generated static site.

The result was: content lived in `content/`, images lived next to the markdown, and the module automated copying/indexing so browsers could request those images at runtime.  
Reference: `nuxt-content-assets` documentation and examples. [web:2][web:3]

## Nuxt 3 and Nuxt Content v3 asset model

With Nuxt 3, asset handling is simpler and more explicit:

- `public/` directory:
  - Any file in `public/` is copied as-is to the build output.
  - Served at the app root, e.g. `public/blog/foo.jpg` → `/blog/foo.jpg`.
  - Not processed by Vite/webpack. Best for static URLs and content images. [web:10][web:24][web:26]

- `assets/` directory:
  - For assets that should be processed by the build tool (SCSS, imported images used in Vue components, etc.). [web:28]
  - Not ideal for markdown-linked static files that should just be served directly.

Nuxt Content v3:

- Still treats `content/` as the source of markdown/YAML/JSON, but it is not an HTTP-served directory. [web:11][web:29]
- Provides a new API (`queryCollection`, `ContentRenderer`, `content.config.ts`) but does not introduce a built-in “copy content-adjacent assets” mechanism. [web:9][web:5][web:11]
- Intentionally keeps content files compatible between v2 and v3 so markdown itself does not need to change. [web:9]

Conclusion: Content v3 does not replace `nuxt-content-assets` directly. Instead, Nuxt 3’s `public/` directory is the primary way to serve content assets.

## Migration strategy overview

Goal: Upgrade to `@nuxt/content` v3 and remove `nuxt-content-assets` while preserving working image/file links for a fully static GitHub Pages deployment.

High-level tasks:

1. **Remove `nuxt-content-assets` from dependencies.**
2. **Move content assets into `public/` (or another well-defined served location).**
3. **Update markdown links to reference assets via `/...` paths.**
4. **Apply the official Content v2 → v3 migration steps for queries and components.**

The rest of this document is structured so an LLM coding agent can execute it step by step.

## Step 1: Update dependencies

1. Remove `nuxt-content-assets` from `dependencies` in `package.json`.
2. Confirm Nuxt 3 and Content v3 dependencies are set:

   - `nuxt`: `^3.19.0` (or latest 3.x)
   - `@nuxt/content`: `^3.0.0` (or latest 3.x) [web:29]
   - Keep other modules as-is unless there are known breaking changes in their own docs.

3. Run the package manager to install:

   ```
   npm install
   # or equivalent yarn/pnpm command
   ```

## Step 2: Restructure content assets

This is where `nuxt-content-assets` used to help by scanning `content/` and copying files. Without it, assets must live in a place Nuxt actually serves.

### Option A (recommended): Use `public/` for content images

This option is simple, stable, and works well for static GitHub Pages hosting.

Target structure example:

```
content/
  blog/
    post-a.md
    post-b.md
public/
  blog/
    post-a-image.jpg
    post-b-image.jpg
  images/
    shared-banner.png
```

Agent instructions:

1. **Locate all non-markdown assets currently adjacent to content.**  
   - Search under `content/` for image/video/document extensions (e.g. `.jpg`, `.jpeg`, `.png`, `.gif`, `.webp`, `.svg`, `.pdf`, `.mp4`).
2. **Move assets into `public/` while preserving a predictable path scheme.** For example:
   - `content/blog/post-a/post-a-image.jpg` → `public/blog/post-a-image.jpg`
   - `content/blog/post-a-image.jpg` → `public/blog/post-a-image.jpg`
   - Or, if you prefer a nested structure, keep a similar folder tree under `public/`:
     - `content/blog/post-a/hero.jpg` → `public/blog/post-a/hero.jpg`
3. **Ensure that GitHub Pages deployment includes the built `public/` contents**, which is the default for Nuxt static builds.

### Option B: Mirror `content/` structure under `public/`

If the existing project has a strong convention like `content/blog/post-a/foo.jpg`, you can mirror that tree in `public/`:

```
content/
  blog/
    post-a.md
    post-b.md
public/
  content/
    blog/
      post-a/
        foo.jpg
      post-b/
        bar.jpg
```

Markdown paths would then be updated to `/content/blog/post-a/foo.jpg`, etc.

Note: This is mostly an organizational preference; Nuxt does not care what path you choose inside `public/`, as long as references in markdown are updated.

## Step 3: Update markdown asset references

After moving assets to `public/`, all content should reference assets via absolute URLs from the root of the app.

Desired pattern:

```

```

or, if mirroring `content/`:

```

```

Agent instructions:

1. **Scan markdown files under `content/` for image/file links.** Look for patterns such as:
   - `![](...)`
   - `[](...)` for linked documents
   - Common extensions: `.jpg`, `.jpeg`, `.png`, `.gif`, `.webp`, `.svg`, `.pdf`, `.mp4`, etc.
2. **Detect relative paths pointing to assets next to markdown**, e.g.:
   - `./image.jpg`
   - `../images/image.jpg`
   - `images/image.jpg`
3. **Rewrite those paths to absolute paths that match the new `public/` location.** For example:
   - If a file was moved to `public/blog/post-a-image.jpg`, rewrite:
     - `![Alt](./post-a-image.jpg)` → `![Alt](/blog/post-a-image.jpg)`
4. If possible, implement this as a scriptable transformation (e.g., a Node script or codemod) so that future path changes can be automated.

Note: No changes to the markdown content structure or frontmatter are required by Content v3 itself, only to the asset URLs. [web:9]

## Step 4: Apply Nuxt Content v2 → v3 migration

Nuxt Content v3 changes API usage but keeps markdown compatible. Key points for the coding agent: [web:9][web:5][web:11][web:21][web:23]

1. **Install / configure Content v3**
   - Ensure `@nuxt/content` is added in `nuxt.config.ts` via `modules: ['@nuxt/content']`.
   - Follow the v3 getting-started docs for any default configuration. [web:29]

2. **Replace v2 APIs with v3 APIs**
   - Replace `queryContent` with `queryCollection` according to the official migration guide and any blog guides used. [web:9][web:23]
   - Use `ContentRenderer` as recommended for rendering pages fetched via `queryCollection`. [web:11]
   - Update imported types:
     - `NavItem` and similar types are now `ContentNavigationItem` from `@nuxt/content`. [web:9]

3. **Create or adjust `content.config.ts`**
   - Define collections, sources, and schemas as needed; keep it minimal at first:
     ```
     // content.config.ts
     import { defineContentConfig, defineCollection } from '@nuxt/content'
     import { z } from 'zod'

     export default defineContentConfig({
       collections: {
         blog: defineCollection({
           source: 'blog/*.md',
           type: 'page',
           schema: z.object({
             // adjust fields to match existing frontmatter
             title: z.string().optional(),
             date: z.string().optional(),
             tags: z.array(z.string()).optional(),
             // image field is optional; actual assets are in public/
             image: z.string().optional()
           })
         })
       }
     })
     ```
   - This configuration is optional if the existing site is simple, but helps enforce structure.

4. **Update dynamic page routing**
   - Ensure there is a catch-all or route-specific page (e.g. `pages/[...slug].vue` or `pages/blog/[slug].vue`) that:
     - Uses `useRoute()`.
     - Queries content via `queryCollection` with `.path(route.path)` or appropriate filter.
     - Renders via `<ContentRenderer :value="page" />`. [web:11]

5. **Run and validate**
   - `npm run dev` and `npm run generate`/`npm run build` should succeed.
   - Check that:
     - All content pages render.
     - All images and assets referenced in markdown resolve to correct URLs.
     - GitHub Pages deployment remains static and functional.

## Optional: Nuxt Image integration

If image optimization is desired later:

1. Install and configure `@nuxt/image`. [web:19]
2. Keep original image files in `public/` (good fit with the scheme above). [web:10][web:26]
3. In Vue components, replace `<img src="/path.jpg">` with `<NuxtImg src="/path.jpg" />`.
4. For markdown:
   - Continue using normal `![](/path.jpg)` for now, or
   - Introduce MDX/vue components within markdown if advanced optimization is required (not necessary for this migration).

This is optional and should not block the initial v3 migration.

## When a replacement for `nuxt-content-assets` might be needed

The old module’s behavior is only strictly needed if all of these are requirements:

- Binary assets must physically live next to markdown inside `content/`.
- Content authors should only use simple relative paths like `./image.png` in markdown.
- There should be no separate manual or scripted copying step to `public/`.

If that is ultimately required, the coding agent can:

- Implement a small custom build-time script (Node or Nuxt module) that:
  - Walks `content/` for non-markdown files.
  - Copies them into appropriately named folders under `public/`.
  - Optionally, rewrites or indexes paths similarly to `nuxt-content-assets`. [web:4][web:22]
- Or look for a Nuxt 3–compatible, actively maintained module that replicates `nuxt-content-assets` semantics.

For now, the recommended approach for a personal static site is to rely on `public/` and absolute paths.

## Summary for the coding agent

1. Remove `nuxt-content-assets` from `package.json`, keep Nuxt 3 and `@nuxt/content` v3. [web:9][web:29]
2. Move all content-related images/files from `content/` into `public/` following a clear structure (`public/blog/...` or similar). [web:10][web:24][web:26]
3. Update all markdown asset references from relative paths to absolute `/...` paths that correspond to the new locations.
4. Apply official Nuxt Content v2 → v3 migration steps:
   - Replace `queryContent` with `queryCollection`.
   - Use `ContentRenderer`.
   - Add `content.config.ts` if helpful for collections and schemas. [web:9][web:11][web:23][web:29]
5. Run the dev server and static build, fix any broken links or type issues, and ensure the static output still works on GitHub Pages.

Sources
[1] Nuxt Content: The git-based CMS for Nuxt projects https://content.nuxt.com
[2] nuxt-content-assets - Codesandbox http://codesandbox.io/p/github/ThomasWT/nuxt-content-assets
[3] Nuxt Content Assets | Dave Stewart https://davestewart.co.uk/projects/open-source/nuxt-content-assets/
[4] Assets · Get Started with Nuxt v4 https://nuxt.com/docs/4.x/getting-started/assets
[5] content · Nuxt Directory Structure v4 https://nuxt.com/docs/4.x/directory-structure/content
[6] Migration - Nuxt Content https://v2.content.nuxt.com/get-started/from-v1/
[7] Assets · Get Started with Nuxt v3 https://nuxt.com/docs/3.x/getting-started/assets
[8] Nuxt.js: How to include local images in Markdown blog content? https://stackoverflow.com/questions/67182172/nuxt-js-how-to-include-local-images-in-markdown-blog-content
[9] Migration - Nuxt Content https://content.nuxt.com/docs/getting-started/migration
[10] Is it possible to define a public assets folder inside a nuxt 3 module https://github.com/nuxt/nuxt/discussions/16155
[11] How to handle content assets? · Issue #3140 · nuxt/content - GitHub https://github.com/nuxt/content/issues/3140
[12] Upgrading from Nuxt Content v2 to v3 https://masteringnuxt.com/blog/upgrading-from-nuxt-content-v2-to-v3
[13] Nuxt Directory Structure v3 https://nuxt.com/docs/3.x/directory-structure
[14] Getting started with nuxt content - a simple blog page https://dev.to/johnpaul/getting-started-with-nuxt-content-a-simple-blog-page-2l6h
[15] Giessen Devs - Guide to migrate Nuxt content v2 to v3 - LinkedIn https://www.linkedin.com/posts/giessen-devs_vue-nuxt-nuxtcontent-activity-7327590879957762050-fkFB
[16] Handling Assets in Nuxt 3 https://masteringnuxt.com/blog/handling-assets-in-nuxt-3
[17] 26 Nuxt Features You May Have Missed https://masteringnuxt.com/blog/26-nuxt-features-you-may-have-missed
[18] Migration to v3 - Nuxt UI https://ui.nuxt.com/docs/getting-started/migration/v3
[19] assets · Nuxt Directory Structure v3 https://nuxt.com/docs/3.x/guide/directory-structure/assets
[20] Nuxt Content v3 https://content.nuxt.com/docs/getting-started
